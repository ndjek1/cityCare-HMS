<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="jakarta.faces.facelets">

    <style type="text/css">
        .responsive-label {
            font-weight: bold;
        }
        .full-width-input {
            width: 100%;
        }
        .form-section {
            margin-bottom: 20px;
        }
        .button-bar {
            margin-top: 20px;
            text-align: center;
        }
        .button-bar .ui-button {
            margin: 0 5px;
        }
    </style>

    <p:panel header="Register New Staff Member" styleClass="form-section">
        <p:growl id="message" showDetail="true"/>
        <h:form id="staffRegForm">
            <p:messages id="regMessages" showDetail="true" closable="true" style="margin-bottom:15px;" />

            <p:fieldset legend="Account Credentials" toggleable="true" styleClass="form-section">
                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
                             columnClasses="ui-g-12 ui-md-3 ui-lg-3 responsive-label, ui-g-12 ui-md-9 ui-lg-9">

                    <p:outputLabel for="username" value="Username:" />
                    <p:inputText id="username" value="#{staffBean.username}" required="true"
                                 requiredMessage="Username is required." styleClass="full-width-input"/>

                    <p:outputLabel for="password" value="Password:" />
                    <p:password id="password" value="#{staffBean.password}" required="true"
                                requiredMessage="Password is required." feedback="true" weakLabel="Weak" goodLabel="Good" strongLabel="Strong" styleClass="full-width-input"/>
                </p:panelGrid>
            </p:fieldset>

            <p:fieldset legend="Personal Information" toggleable="true" styleClass="form-section">
                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
                             columnClasses="ui-g-12 ui-md-3 ui-lg-3 responsive-label, ui-g-12 ui-md-9 ui-lg-9">

                    <p:outputLabel for="fullName" value="Full Name:" />
                    <p:inputText id="fullName" value="#{staffBean.fullName}" required="true"
                                 requiredMessage="Full name is required." styleClass="full-width-input"/>

                    <p:outputLabel for="email" value="Email:" />
                    <p:inputText id="email" value="#{staffBean.email}" required="true" type="email"
                                 requiredMessage="Email is required." validatorMessage="Invalid email format." styleClass="full-width-input">
                        <f:validateRegex pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$" />
                    </p:inputText>

                    <p:outputLabel for="phone" value="Phone:" />
                    <p:inputMask id="phone" value="#{staffBean.phone}" mask="(999) 999-9999" styleClass="full-width-input"/>

                    <p:outputLabel for="address" value="Address:" />
                    <p:inputTextarea id="address" value="#{staffBean.address}" rows="3" autoResize="false" styleClass="full-width-input"/>

                    <p:outputLabel for="dob" value="Date of Birth:" />
                    <p:datePicker id="dob" value="#{staffBean.birthday}" showIcon="true" yearRange="c-100:c" pattern="MM/dd/yyyy" styleClass="full-width-input"/>

                    <p:outputLabel for="gender" value="Gender:" />
                    <p:selectOneRadio id="gender" value="#{staffBean.gender}" layout="responsive" columns="3">
                        <!-- layout="responsive" and columns="3" makes radio buttons flow nicely -->
                        <f:selectItem itemLabel="Male" itemValue="Male"/>
                        <f:selectItem itemLabel="Female" itemValue="Female"/>
                        <f:selectItem itemLabel="Other" itemValue="Other"/>
                    </p:selectOneRadio>
                </p:panelGrid>
            </p:fieldset>

            <p:fieldset legend="Professional Details" toggleable="true" styleClass="form-section">
                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
                             columnClasses="ui-g-12 ui-md-3 ui-lg-3 responsive-label, ui-g-12 ui-md-9 ui-lg-9">

                    <p:outputLabel for="role" value="Role:" />
                    <p:selectOneMenu id="role" value="#{staffBean.role}" required="true"
                                     requiredMessage="Role is required." styleClass="full-width-input">
                        <f:selectItem itemLabel="--- Select Role ---" itemValue="#{null}" noSelectionOption="true"/>
                        <f:selectItems value="#{staffBean.availableRoles}" var="roleItem"
                                       itemLabel="#{roleItem.toString()}" itemValue="#{roleItem}"/>
                        <!-- Use roleItem.displayName if your enum has a prettier display name method -->
                    </p:selectOneMenu>

                    <p:outputLabel for="department" value="Department:" />
                    <p:selectOneMenu id="department" value="#{staffBean.department}" required="true"
                                     requiredMessage="Department is required." styleClass="full-width-input">
                        <f:selectItem itemLabel="--- Select Department ---" itemValue="#{null}" noSelectionOption="true"/>
                        <f:selectItems value="#{staffBean.availableDepartments}" var="deptItem"
                                       itemLabel="#{deptItem.displayName}" itemValue="#{deptItem}"/>
                        <!-- Assuming HospitalDepartment enum has a getDisplayName() or similar -->
                    </p:selectOneMenu>
                </p:panelGrid>
            </p:fieldset>

            <div class="button-bar">
                <p:commandButton value="Register Staff" action="#{staffBean.register}"
                                 update="staffRegForm message regMessages"
                                 process="@form" icon="pi pi-check" styleClass="form-button"/>
                <p:commandButton value="Clear Form" type="button" onclick="PF('staffRegFormWidgetVar').reset(); return false;"
                                 icon="pi pi-refresh" styleClass="ui-button-secondary" process="@this"/>
                <!-- Assign a widgetVar to the form for client-side reset, or call bean method -->
            </div>
        </h:form>
    </p:panel>
</ui:composition>