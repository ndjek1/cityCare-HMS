<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CityCare HMS - Welcome</title>

    <!-- Ensure your PrimeFaces theme is loaded (preferably from web.xml) -->
    <!-- <h:outputStylesheet library="primefaces-lara-light-indigo" name="theme.css" /> -->

    <!-- PrimeFlex for layout -->
    <link rel="stylesheet" href="https://unpkg.com/primeflex@latest/primeflex.css"/>

    <!-- Link to our new, improved CSS file -->
    <h:outputStylesheet library="css" name="login-v2.css"/>
</h:head>

<h:body styleClass="login-page-v2">

    <div class="login-panel-v2">

        <!-- 1. The Dynamic Image Section -->
        <div class="login-image-container">
            <div class="login-image-bg"
                 style="background-image: url('#{resource['images:hospital.jpeg']}')">
                <!-- Make sure your image is at /resources/images/hospital-login-bg.jpg -->
            </div>
        </div>

        <!-- 2. The Modern Form Section -->
        <div class="login-form-container">
            <h:form id="loginForm">
                <div class="login-header-v2">
                    <span class="logo">
                        <i class="pi pi-heart-fill"></i>
                        CityCare HMS
                    </span>
                    <h2>Welcome Back!</h2>
                    <p>Please enter your details to sign in.</p>
                </div>

                <!-- A dedicated area for login error messages -->
                <p:messages id="loginMessages" showDetail="true" closable="true">
                    <p:autoUpdate/>
                </p:messages>

                <div class="p-fluid">
                    <!-- FLOATING LABEL for Username -->
                    <span class="p-float-label">
                        <p:inputText id="float-input"
                                     value="#{userAccountBean.username}"
                                     required="true"/>
                        <p:outputLabel for="@previous" value="Username"/>
                    </span>

                    <!-- FLOATING LABEL for Password -->
                    <span class="p-float-label">
                         <p:password id="toggle"
                                     value="#{userAccountBean.password}"
                                     required="true"
                                     toggleMask="true"
                                     redisplay="true"/>
                        <p:outputLabel for="@previous" value="Password"/>
                    </span>
                    <!-- Login Options: Remember me & Forgot Password -->
                    <div class="login-options">
                        <p:selectBooleanCheckbox id="rememberMe" itemLabel="Remember me"/>
                        <a href="#">Forgot password?</a>
                    </div>

                    <!-- The main login button -->
                    <p:commandButton value="Login"
                                     action="#{userAccountBean.login}"
                                     process="@form"
                                     update="@none"
                    ajax="false"/>   <!-- important -->

                </div>
            </h:form>
        </div>
    </div>
</h:body>
</html>